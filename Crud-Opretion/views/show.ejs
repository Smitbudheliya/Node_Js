<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show Todo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .board-header {
            font-weight: bold;
            padding: 10px;
            border-radius: 8px 8px 0 0;
            color: #fff;
        }

        .bg-open {
            background: #00bbd454;
        }

        .bg-progress {
            background: #ffc10769;
            color: #fff !important;
        }
        
        .bg-review {
            background: #4caf4f9a;
        }

        .bg-done {
            background: #6e42c160;
        }

        .task-card {
            border: none;
            border-radius: 12px;
            transition: transform 0.2s ease;
        }

        .task-card:hover {
            transform: scale(1.03);
        }

        .task-title {
            font-weight: 600;
        }

        .task-actions {
            margin-top: 8px;
        }

        .task-actions .btn {
            padding: 2px 8px;
            font-size: 0.85rem;
        }

        .btn-edit {
            background: #2196f3;
            color: #fff;
        }

        .btn-edit:hover {
            background: #0b79d0;
        }

        .btn-delete {
            background: #e53935;
            color: #fff;
        }

        .btn-delete:hover {
            background: #c62828;
        }
    </style>
</head>

<body class="text-light">

    <div class="container py-4">
        <nav class="navbar navbar-custom mb-4 px-3 shadow-sm">
            <a class="navbar-brand text-light" href="#"><i class="bi bi-kanban"></i> My Todos</a>
            <form class="d-flex ms-auto">
                <input class="form-control form-control-sm me-2" type="search" placeholder="Search tasks...">
                <button class="btn btn-outline-light btn-sm" type="submit"><i class="bi bi-search"></i></button>
            </form>
            <a href="/" class="btn border-white ms-3 add-btn px-3" style="background-color: gray;"><i class="bi bi-plus-circle"></i> Add</a>
        </nav>

        <% const types=["Open", "In Progress" , "Review" , "Done" ]; %>

            <div class="row g-4">
                <% types.forEach(cat=> { %>
                    <div class="col-12 col-md-6 col-lg-3">
                        <div class="board-column h-100">
                            <div class="board-header 
              <% if(cat==='Open'){ %> bg-open <% } %>
              <% if(cat==='In Progress'){ %> bg-progress <% } %>
              <% if(cat==='Review'){ %> bg-review <% } %>
              <% if(cat==='Done'){ %> bg-done <% } %>">
                                <i class="bi bi-folder-check me-1"></i>
                                <%= cat %>
                            </div>
                            <div class="p-3">
                                <% todos.filter(t=> t.type === cat).forEach(todo => { %>
                                    <div class="card task-card mb-3 shadow-sm">
                                        <div class="card-body">
                                            <h6 class="task-title d-flex align-items-center">
                                                <i class="bi bi-check2-circle text-primary me-2"></i>
                                                <%= todo.task %>
                                                    <% if(todo.image) { %>
                                                        <img src="<%= todo.image %>" class="ms-2"
                                                            style="width:30px; height:30px; border-radius:50%; object-fit:cover;">
                                                        <% } %>
                                            </h6>

                                            <% if(todo.description && todo.description.trim() !=="" ) { %>
                                                <p class="text-muted small mb-2">
                                                    <%= todo.description %>
                                                </p>
                                                <% } %>
                                                    <% if(todo.category && todo.category.length> 0) { %>
                                                        <% todo.category.forEach((c, i)=> {
                                                            const colors =
                                                            ["primary","warning","danger","success","secondary","info","dark"];
                                                            const colorClass = colors[i % colors.length];
                                                            %>
                                                            <span class="badge bg-<%= colorClass %> me-1">
                                                                <%= c %>
                                                            </span>
                                                            <% }) %>
                                                                <% } %>
                                                                    <div
                                                                        class="task-actions d-flex justify-content-end">
                                                                        <a href="/edit/<%= todo._id %>"
                                                                            class="btn btn-edit btn-sm me-2">
                                                                            <i class="bi bi-pencil-square"></i>
                                                                        </a>
                                                                        <a href="/delete/<%= todo._id %>"
                                                                            class="btn btn-delete btn-sm">
                                                                            <i class="bi bi-trash"></i>
                                                                        </a>
                                                                    </div>

                                        </div>
                                    </div>
                                    <% }) %>
                            </div>
                        </div>
                    </div>
                    <% }) %>
            </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>